{"ast":null,"code":"export function fetchVideos() {\n  return function (dispatch, getState) {\n    var headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    var token = getState().auth.token;\n\n    if (token) {\n      headers[\"Authorization\"] = \"Token \".concat(token);\n    }\n\n    return fetch(\"http://127.0.0.1:8000/api/videos/\", {\n      headers: headers\n    }).then(function (res) {\n      if (res.status < 500) {\n        return res.json().then(function (data) {\n          return {\n            status: res.status,\n            data: data\n          };\n        });\n      } else {\n        console.log(\"Server Error!\");\n        throw res;\n      }\n    }).then(function (res) {\n      if (res.status === 200) {\n        return dispatch({\n          type: 'FETCH_VIDEOS',\n          videos: res.data\n        });\n      } else if (res.status === 401 || res.status === 403) {\n        dispatch({\n          type: \"AUTHENTICATION_ERROR\",\n          data: res.data\n        });\n        throw res.data;\n      }\n    });\n  };\n}\nexport function addVideo(name, url, playlist) {\n  return function (dispatch, getState) {\n    var headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    var token = getState().auth.token;\n\n    if (token) {\n      headers[\"Authorization\"] = \"Token \".concat(token);\n    }\n\n    var body = JSON.stringify({\n      name: name,\n      url: url,\n      playlist: playlist\n    });\n    return fetch(\"http://127.0.0.1:8000/api/videos/\", {\n      headers: headers,\n      method: \"POST\",\n      body: body\n    }).then(function (res) {\n      if (res.status < 500) {\n        return res.json().then(function (data) {\n          return {\n            status: res.status,\n            data: data\n          };\n        });\n      } else {\n        console.log(\"Server Error!\");\n        throw res;\n      }\n    }).then(function (res) {\n      if (res.status === 201) {\n        return dispatch({\n          type: 'ADD_VIDEO',\n          video: res.data\n        });\n      } else if (res.status === 401 || res.status === 403) {\n        dispatch({\n          type: \"AUTHENTICATION_ERROR\",\n          data: res.data\n        });\n        throw res.data;\n      }\n    });\n  };\n}\nexport function updateVideo(index, name, url, playlist) {\n  return function (dispatch, getState) {\n    var headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    var token = getState().auth.token;\n\n    if (token) {\n      headers[\"Authorization\"] = \"Token \".concat(token);\n    }\n\n    var body = JSON.stringify({\n      name: name,\n      url: url,\n      playlist: playlist\n    });\n    var videoId = getState().videos[index].id;\n    var base_url = \"http://127.0.0.1:8000/api/videos/\" + videoId + \"/\";\n    return fetch(base_url, {\n      headers: headers,\n      method: \"PUT\",\n      body: body\n    }).then(function (res) {\n      if (res.status < 500) {\n        return res.json().then(function (data) {\n          return {\n            status: res.status,\n            data: data\n          };\n        });\n      } else {\n        console.log(\"Server Error!\");\n        throw res;\n      }\n    }).then(function (res) {\n      if (res.status === 200) {\n        return dispatch({\n          type: 'UPDATE_VIDEO',\n          video: res.data,\n          index: index\n        });\n      } else if (res.status === 401 || res.status === 403) {\n        dispatch({\n          type: \"AUTHENTICATION_ERROR\",\n          data: res.data\n        });\n        throw res.data;\n      }\n    });\n  };\n}\nexport function deleteVideo(index) {\n  return function (dispatch, getState) {\n    var headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    var token = getState().auth.token;\n\n    if (token) {\n      headers[\"Authorization\"] = \"Token \".concat(token);\n    }\n\n    console.log(getState());\n    var videoId = getState().videos[index].id;\n    var base_url = \"http://127.0.0.1:8000/api/videos/\" + videoId + \"/\";\n    return fetch(base_url, {\n      headers: headers,\n      method: \"DELETE\"\n    }).then(function (res) {\n      if (res.status === 204) {\n        return {\n          status: res.status,\n          data: {}\n        };\n      } else if (res.status < 500) {\n        return res.json().then(function (data) {\n          return {\n            status: res.status,\n            data: data\n          };\n        });\n      } else {\n        console.log(\"Server Error!\");\n        throw res;\n      }\n    }).then(function (res) {\n      if (res.status === 204) {\n        return dispatch({\n          type: 'DELETE_VIDEO',\n          index: index\n        });\n      } else if (res.status === 401 || res.status === 403) {\n        dispatch({\n          type: \"AUTHENTICATION_ERROR\",\n          data: res.data\n        });\n        throw res.data;\n      }\n    });\n  };\n}","map":{"version":3,"sources":["C:\\Users\\Sarah\\PycharmProjects\\admoapi\\admoapireact2\\src\\actions\\videos.js"],"names":["fetchVideos","dispatch","getState","headers","token","auth","fetch","then","res","status","json","data","console","log","type","videos","addVideo","name","url","playlist","body","JSON","stringify","method","video","updateVideo","index","videoId","id","base_url","deleteVideo"],"mappings":"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","sourcesContent":["export function fetchVideos() {\r\n  return (dispatch, getState) => {\r\n    let headers = {\"Content-Type\": \"application/json\"};\r\n    let {token} = getState().auth;\r\n\r\n    if (token) {\r\n      headers[\"Authorization\"] = `Token ${token}`;\r\n    }\r\n\r\n    return fetch(\"http://127.0.0.1:8000/api/videos/\", {headers, })\r\n      .then(res => {\r\n        if (res.status < 500) {\r\n          return res.json().then(data => {\r\n            return {status: res.status, data};\r\n          })\r\n        } else {\r\n          console.log(\"Server Error!\");\r\n          throw res;\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          return dispatch({type: 'FETCH_VIDEOS', videos: res.data});\r\n        } else if (res.status === 401 || res.status === 403) {\r\n          dispatch({type: \"AUTHENTICATION_ERROR\", data: res.data});\r\n          throw res.data;\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\nexport function addVideo(name, url, playlist) {\r\n  return (dispatch, getState) => {\r\n    let headers = {\"Content-Type\": \"application/json\"};\r\n    let {token} = getState().auth;\r\n\r\n    if (token) {\r\n      headers[\"Authorization\"] = `Token ${token}`;\r\n    }\r\n\r\n    let body = JSON.stringify({name, url, playlist});\r\n    return fetch(\"http://127.0.0.1:8000/api/videos/\", {headers, method: \"POST\", body})\r\n      .then(res => {\r\n        if (res.status < 500) {\r\n          return res.json().then(data => {\r\n            return {status: res.status, data};\r\n          })\r\n        } else {\r\n          console.log(\"Server Error!\");\r\n          throw res;\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (res.status === 201) {\r\n          return dispatch({type: 'ADD_VIDEO', video: res.data});\r\n        } else if (res.status === 401 || res.status === 403) {\r\n          dispatch({type: \"AUTHENTICATION_ERROR\", data: res.data});\r\n          throw res.data;\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\nexport function updateVideo(index, name, url, playlist) {\r\n  return (dispatch, getState) => {\r\n\r\n    let headers = {\"Content-Type\": \"application/json\"};\r\n    let {token} = getState().auth;\r\n\r\n    if (token) {\r\n      headers[\"Authorization\"] = `Token ${token}`;\r\n    }\r\n\r\n    let body = JSON.stringify({name, url, playlist});\r\n    let videoId = getState().videos[index].id;\r\n    let base_url = \"http://127.0.0.1:8000/api/videos/\"+videoId+\"/\";\r\n\r\n    return fetch(base_url, {headers, method: \"PUT\", body})\r\n      .then(res => {\r\n        if (res.status < 500) {\r\n          return res.json().then(data => {\r\n            return {status: res.status, data};\r\n          })\r\n        } else {\r\n          console.log(\"Server Error!\");\r\n          throw res;\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (res.status === 200) {\r\n          return dispatch({type: 'UPDATE_VIDEO', video: res.data, index});\r\n        } else if (res.status === 401 || res.status === 403) {\r\n          dispatch({type: \"AUTHENTICATION_ERROR\", data: res.data});\r\n          throw res.data;\r\n        }\r\n      })\r\n  }\r\n}\r\n\r\nexport function deleteVideo(index) {\r\n  return (dispatch, getState) => {\r\n\r\n    let headers = {\"Content-Type\": \"application/json\"};\r\n    let {token} = getState().auth;\r\n\r\n    if (token) {\r\n      headers[\"Authorization\"] = `Token ${token}`;\r\n    }\r\n    console.log(getState());\r\n    let videoId = getState().videos[index].id;\r\n    let base_url = \"http://127.0.0.1:8000/api/videos/\"+videoId+\"/\";\r\n\r\n    return fetch(base_url, {headers, method: \"DELETE\"})\r\n      .then(res => {\r\n        if (res.status === 204) {\r\n          return {status: res.status, data: {}};\r\n        } else if (res.status < 500) {\r\n          return res.json().then(data => {\r\n            return {status: res.status, data};\r\n          })\r\n        } else {\r\n          console.log(\"Server Error!\");\r\n          throw res;\r\n        }\r\n      })\r\n      .then(res => {\r\n        if (res.status === 204) {\r\n          return dispatch({type: 'DELETE_VIDEO', index});\r\n        } else if (res.status === 401 || res.status === 403) {\r\n          dispatch({type: \"AUTHENTICATION_ERROR\", data: res.data});\r\n          throw res.data;\r\n        }\r\n      })\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}